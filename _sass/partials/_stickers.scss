$sticker-width-desktop: 20rem;
$sticker-width-mobile: 5rem;

$steps: 100;
$step: random($steps);

@keyframes glitch-effect {
  @for $i from 0 through $steps {
    #{percentage($i*(1/$steps))} {
      transform: none;
      opacity: 1;

      @if $i == $step {
        transform: skew(#{random(15)}deg) scale(#{random(2) / 2});
        opacity: 0.15;
      } @else if $i == $step + 1 {
        transform: scale(0.1);
        opacity: 0.5;
      }
    }
  }
}
@keyframes breathe-effect {
  0% {
    transform: scale(.9);
  }
  100% {
    transform: scale(1);
  }
}

@mixin sticker-animation {
  animation-direction: alternate-reverse;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

@mixin sticker-animation-glitch {
  @include sticker-animation;
  animation-delay: #{random(5)}s;
  animation-duration: #{random(5) + 5}s;
  animation-name: glitch-effect;
}

@mixin sticker-animation-breathe {
  @include sticker-animation;
  animation-delay: #{random(10)}s;
  animation-duration: #{random(10) + 20}s;
  animation-name: breathe-effect;
}

@mixin sticker-animations {
  &.animation-glitch {
    @include sticker-animation-glitch;
  }
  &.animation-breathe {
    @include sticker-animation-breathe;
  }
}

@mixin sticker-layout($first-x, $first-y, $last-x, $last-y) {
  .pj-sticker {
    &-one {
      left: $first-x;
      top: $first-y;
      @include sticker-animations;
    }
    &-two {
      right: $last-x;
      top: $last-y;
      @include sticker-animations;
    }
  }
}

.pj-sticker {
  position: fixed;
  z-index: 2;

  width: $sticker-width-mobile;

  @media (min-width: $bp-tablet) {
    width: $sticker-width-desktop;
  }
}

// Layout: One (Top left, bottom right)
.pj-stickers--layout-one {
  @include sticker-layout(2rem, 40vh, -2rem, 80vh);

  @media (min-width: $bp-tablet) {
    @include sticker-layout(
      calc((100vw - #{$container-max-width}) / 2 - #{$sticker-width-desktop}),
      25vh,
      calc((100vw - #{$container-max-width}) / 2),
      50vh
    );
  }
}

// Layout: Two (Bottom left, top right)
.pj-stickers--layout-two {
  @include sticker-layout(2rem, 80vh, -2rem, 40vh);

  @media (min-width: $bp-tablet) {
    @include sticker-layout(
      calc((100vw - #{$container-max-width}) / 2 - #{$sticker-width-desktop}),
      50vh,
      calc((100vw - #{$container-max-width}) / 2),
      25vh
    );
  }
}

// Preview for CMS

.pj-sticker--preview {
  display: flex;
  flex-direction: column;
  max-width: $sticker-width-desktop * 4;
  gap: 1rem;
  margin: auto;
  margin-top: 3rem;

  .pj-sticker {
    width: $sticker-width-desktop * 2;
    object-fit: contain;
  }
}
