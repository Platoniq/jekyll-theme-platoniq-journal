$sticker-width-desktop: 256px;
$sticker-width-tablet: 128px;
$sticker-width-mobile: 64px;
$steps: 100;
$step: random($steps);

@keyframes glitch-effect {
  @for $i from 0 through $steps {
    #{percentage($i*(1/$steps))} {
      transform: none;
      opacity: 1;

      @if $i == $step {
        transform: skew(#{random(15)}deg) translate(0, #{random(200) + 200}px);
        opacity: 0.15;
      } @else if $i == $step + 1 {
        transform: scale(0.1);
        opacity: 0.5;
      }
    }
  }
}

@keyframes breathe-effect {
  0% {
    transform: scale(0.9);
  }

  100% {
    transform: scale(1);
  }
}

@mixin sticker-animation {
  animation-direction: alternate-reverse;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

@mixin sticker-animation-glitch {
  @include sticker-animation;

  animation-delay: #{random(5)}s;
  animation-duration: #{random(5) + 5}s;
  animation-name: glitch-effect;
}

@mixin sticker-animation-breathe {
  @include sticker-animation;

  animation-delay: #{random(10)}s;
  animation-duration: #{random(5) + 10}s;
  animation-name: breathe-effect;
}

@mixin sticker-animations {
  &.animation-glitch {
    @include sticker-animation-glitch;
  }

  &.animation-breathe {
    @include sticker-animation-breathe;
  }
}

@mixin sticker-layout($first-x, $first-y, $last-x, $last-y) {
  .pj-sticker {
    &-one {
      left: $first-x;
      top: $first-y;

      @include sticker-animations;
    }

    &-two {
      right: $last-x;
      top: $last-y;

      @include sticker-animations;
    }
  }
}

.pj-sticker {
  pointer-events: none;
  position: fixed;
  z-index: 2;
  width: $sticker-width-mobile;

  @media (min-width: $bp-desktop) {
    width: $sticker-width-tablet;
  }

  @media (min-width: $bp-desktop-xxl) {
    width: $sticker-width-desktop;
  }
}

// Layout: One (Top left, bottom right)
.pj-stickers-layout-one {
  @include sticker-layout(calc(16px + $sticker-width-mobile), 40vh, -2rem, 80vh);

  @media (min-width: $bp-desktop) {
    @include sticker-layout(
      calc(64px + $sticker-width-tablet),
      25vh,
      calc((100vw - #{$container-max-width}) / 2),
      50vh
    );
  }

  @media (min-width: $bp-desktop-xxl) {
    @include sticker-layout(
      calc(64px + (100vw - #{$container-max-width}) / 2 - #{$sticker-width-desktop}),
      25vh,
      calc((100vw - #{$container-max-width}) / 2),
      50vh
    );
  }
}

// Layout: Two (Bottom left, top right)
.pj-stickers-layout-two {
  @include sticker-layout(2rem, 80vh, -2rem, 40vh);

  @media (min-width: $bp-desktop) {
    @include sticker-layout(
      calc((100vw) / 2 - #{$sticker-width-tablet}),
      50vh,
      calc((100vw - #{$container-max-width}) / 2),
      25vh
    );
  }

  @media (min-width: $bp-desktop-xxl) {
    @include sticker-layout(
      calc((100vw - #{$container-max-width}) / 2 - #{$sticker-width-desktop}),
      50vh,
      calc((100vw - #{$container-max-width}) / 2),
      25vh
    );
  }
}

// Preview for CMS

.pj-sticker-preview {
  display: flex;
  flex-direction: column;
  max-width: $sticker-width-desktop * 4;
  gap: 1rem;
  margin: auto;
  margin-top: 3rem;
  align-items: center;

  .pj-sticker {
    position: relative;
    width: $sticker-width-desktop;
    object-fit: contain;
  }
}
